(this["webpackJsonpsilhouette-guessr"]=this["webpackJsonpsilhouette-guessr"]||[]).push([[0],{110:function(e,t){},145:function(e,t){},191:function(e,t,n){},192:function(e,t,n){},195:function(e,t){},202:function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),l=n(168),i=n.n(l),o=(n(191),n(147)),c=n(217),s=n(218),u=n(219),g=n(220),d=n(213),b=n(227),p=n(176),m=n(53),j=window.geolonia,f=new j.Marker({color:"#FF0000",draggable:!0}),h=new j.Marker({color:"#FF0000",draggable:!0}),y=[{lng:139.746247,lat:35.659103},{lng:139.775039823498,lat:35.62688839051935},{lng:139.7425465928838,lat:35.62901450284541},{lng:139.73098887729316,lat:35.634774933759935},{lng:139.73084512638385,lat:35.64045446313923},{lng:139.73081620816902,lat:35.64998949295825},{lng:139.726025422902,lat:35.652420489771295},{lng:139.7410097090811,lat:35.65267872518089},{lng:139.75412546592008,lat:35.665835434143766},{lng:139.73210944808986,lat:35.67121154298727},{lng:139.7148656884602,lat:35.66547356765915},{lng:139.7303179953378,lat:35.676509652592905},{lng:139.75763097559113,lat:35.665074208904436}],O=n(148),w=(n(192),n(193),n(50)),v=window.geolonia;var x=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=Object(a.useState)(null),l=Object(o.a)(r,2),i=l[0],j=l[1],x=Object(a.useMemo)((function(){return y[(e=14,Math.floor(Math.random()*e))];var e}),[]),k=Object(a.useState)({longitude:x.lng,latitude:x.lat,zoom:11,pitch:45,bearing:0,maxPitch:50,minPitch:0,position:[0,100,500]}),S=Object(o.a)(k,2),L=S[0],F=S[1],M=Object(a.useCallback)((function(){F({longitude:x.lng,latitude:x.lat,zoom:11,pitch:45,bearing:0,position:[0,100,500],transitionInterpolator:new d.a})}),[x]);Object(a.useLayoutEffect)((function(){t.current&&null===e.current&&(e.current=new v.Map({container:t.current,style:"geolonia/basic",interactive:!0,center:[x.lng,x.lat],zoom:11.5,pitch:0}),e.current.on("click",(function(t){h.setLngLat(t.lngLat).addTo(e.current),j(t.lngLat)})))}),[t,x.lng,x.lat]);var R=new b.a({far:3e3,controller:{keyboard:{moveSpeed:1e4}}}),T=new s.a({id:"terrain",minZoom:0,maxZoom:14,elevationDecoder:{rScaler:6553.6,gScaler:25.6,bScaler:.1,offset:-9965},elevationData:"https://tileserver.geolonia.com/gsi-dem/tiles/{z}/{x}/{y}.png?v=1.0.0%2B497d8d48d54c79041032ae681e92e691&key=YOUR-API-KEY",texture:"https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg",wireframe:!1,material:!1,color:[211,211,211],pickable:!1,opacity:.1}),z=new u.a({id:"tile-3d-layer",data:"https://raw.githubusercontent.com/naogify/silhouette-guessr/main/public/tile3d/tileset.json",loader:g.a,loadOptions:{tileset:{throttleRequests:!0,maxRequests:500,maximumMemoryUsage:600,viewDistanceScale:.5,updateTransforms:!1,loadTiles:!1}},color:[255,255,255],pickable:!1,opacity:.6});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{ref:t,id:"mini-map"}),Object(w.jsx)("div",{ref:n,id:"score"}),Object(w.jsx)(O.a,{id:"guess-btn",onClick:function(){return function(e,t,n,a){if(!e||!t)return!1;var r=[t.lng,t.lat],l=[e.lng,e.lat],i=Object(m.c)(r),o=Object(m.c)(l),c=1e3*Object(p.a)(i,o);a.current.innerHTML="".concat(Math.round(c),"m"),f.setLngLat(e).addTo(n.current),n.current.addSource("line-marker",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[r,l]}}}),n.current.addLayer({id:"line",type:"line",source:"line-marker",layout:{},paint:{"line-color":"#000000","line-width":5}})}(x,i,e,n)},variant:"primary",children:"Guess"}),Object(w.jsx)(O.a,{className:"return-start-btn",onClick:M,children:"Return to Start"}),Object(w.jsx)(c.a,{views:R,mapStyle:"geolonia/gsi",initialViewState:L,controller:!0,layers:[T,z]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),l(e),i(e)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(x,{})}),document.getElementById("root")),k()}},[[202,1,2]]]);
//# sourceMappingURL=main.5c1ca82b.chunk.js.map